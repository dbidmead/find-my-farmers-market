(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[125],{7659:function(e,s,t){Promise.resolve().then(t.bind(t,9256))},9256:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return ApiMultiTestPage}});var r=t(7437),a=t(2265);let i=[{zip:"20500",location:"Washington DC"},{zip:"10001",location:"New York City, NY"},{zip:"90210",location:"Beverly Hills, CA"},{zip:"94103",location:"San Francisco, CA"},{zip:"02108",location:"Boston, MA"},{zip:"60601",location:"Chicago, IL"},{zip:"98101",location:"Seattle, WA"},{zip:"19103",location:"Philadelphia, PA"}],l=[{id:"format1",name:"Format 1",url:"https://www.usdalocalfoodportal.com/api/farmersmarket/",description:"With trailing slash after farmersmarket"},{id:"format2",name:"Format 2",url:"https://www.usdalocalfoodportal.com/api/farmersmarket",description:"Without trailing slash after farmersmarket"},{id:"format3",name:"Format 3",url:"https://www.usdalocalfoodportal.com/api/zipSearch",description:"Using zipSearch endpoint"},{id:"format4",name:"Format 4",url:"https://www.ams.usda.gov/local-food-directories/farmersmarkets",description:"Official AMS URL"}];function ApiMultiTestPage(){let[e,s]=(0,a.useState)("20500"),[t,o]=(0,a.useState)("20"),[n,c]=(0,a.useState)({}),[d,m]=(0,a.useState)(!1),[u,p]=(0,a.useState)(null),h="wT29LlT8K9",testAllFormats=async()=>{try{m(!0),p(null);let s={},r=l.map(async r=>{try{let a="".concat(r.url,"?apikey=").concat(h,"&zip=").concat(e,"&radius=").concat(t);console.log("Testing ".concat(r.name," (API key hidden):"),a.replace(h,"***API_KEY***"));let i=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json","User-Agent":"FarmersMarketDirectory/1.0"},credentials:"omit"}),l={id:r.id,status:i.status,statusText:i.statusText,ok:i.ok,headers:Object.fromEntries([...i.headers.entries()])};if(!i.ok){s[r.id]={...l,success:!1,error:"API responded with status ".concat(i.status)};return}let o=await i.json();s[r.id]={...l,success:!0,data:o,dataType:typeof o,isArray:Array.isArray(o),itemCount:Array.isArray(o)?o.length:"object"==typeof o?Object.keys(o).length:0}}catch(e){s[r.id]={id:r.id,success:!1,error:e instanceof Error?e.message:"Unknown error"}}});await Promise.all(r),c(s)}catch(e){console.error("API multi-test error:",e),p(e instanceof Error?e.message:"Unknown error occurred")}finally{m(!1)}};return(0,a.useEffect)(()=>{testAllFormats()},[]),(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("a",{href:"/",className:"text-green-600 hover:underline",children:"â† Back to Home"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"API Multi-Format Testing Page"}),(0,r.jsx)("p",{className:"mb-6",children:"This page tests multiple API formats simultaneously to determine which one works with the USDA Farmers Market API."}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm mb-1",children:"ZIP Code:"}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>s(e.target.value),className:"px-2 py-1 border rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm mb-1",children:"Radius (miles):"}),(0,r.jsx)("input",{type:"text",value:t,onChange:e=>o(e.target.value),className:"px-2 py-1 border rounded"})]}),(0,r.jsx)("div",{className:"self-end",children:(0,r.jsx)("button",{onClick:testAllFormats,disabled:d,className:"px-4 py-1 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:d?"Testing...":"Test All Formats"})})]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:"Sample ZIP Codes to Try:"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:i.map(t=>(0,r.jsxs)("button",{onClick:()=>s(t.zip),className:"text-xs p-1 rounded ".concat(e===t.zip?"bg-blue-500 text-white":"bg-blue-100 hover:bg-blue-200"),children:[t.zip," - ",t.location]},t.zip))})]})]}),u&&(0,r.jsxs)("div",{className:"p-3 bg-red-100 text-red-700 rounded mb-4",children:["Error: ",u]}),(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:l.map(s=>{let a=n[s.id];return(0,r.jsxs)("div",{className:"border rounded p-4 ".concat((null==a?void 0:a.success)?"bg-green-50 border-green-200":a?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"),children:[(0,r.jsx)("h3",{className:"font-bold text-lg mb-2",children:s.name}),(0,r.jsx)("p",{className:"text-sm mb-2",children:s.description}),(0,r.jsxs)("div",{className:"text-xs mb-2 break-all",children:[(0,r.jsx)("span",{className:"font-medium",children:"URL:"})," ",s.url,"?apikey=***&zip=",e,"&radius=",t]}),!a&&(0,r.jsx)("div",{className:"text-gray-500 text-sm",children:"Testing..."}),(null==a?void 0:a.error)&&(0,r.jsxs)("div",{className:"text-red-600 text-sm mt-2",children:["Error: ",a.error]}),(null==a?void 0:a.success)&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("div",{className:"text-sm mb-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Status:"})," ",a.status," ",a.statusText]}),(0,r.jsxs)("div",{className:"text-sm mb-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Data type:"})," ",a.dataType,a.isArray&&" (Array with ".concat(a.itemCount," items)"),!a.isArray&&"object"===a.dataType&&" (Object with ".concat(a.itemCount," keys)")]}),a.data&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("div",{className:"text-sm font-medium mb-1",children:"Sample Data:"}),(0,r.jsx)("pre",{className:"bg-white p-2 text-xs overflow-auto max-h-40 rounded border",children:JSON.stringify(a.data,null,2)})]})]})]},s.id)})}),(0,r.jsxs)("div",{className:"mt-8 p-4 bg-gray-100 rounded",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Environment Info:"}),(0,r.jsxs)("p",{children:["NODE_ENV: ","production"]}),(0,r.jsxs)("p",{children:["NEXT_PUBLIC_BASE_PATH: ","/find-my-farmers-market"]}),(0,r.jsxs)("p",{children:["API Key Set: ","Yes"]})]})]})}},622:function(e,s,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=t(2265),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function q(e,s,t){var r,i={},c=null,d=null;for(r in void 0!==t&&(c=""+t),void 0!==s.key&&(c=""+s.key),void 0!==s.ref&&(d=s.ref),s)l.call(s,r)&&!n.hasOwnProperty(r)&&(i[r]=s[r]);if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:a,type:e,key:c,ref:d,props:i,_owner:o.current}}s.Fragment=i,s.jsx=q,s.jsxs=q},7437:function(e,s,t){"use strict";e.exports=t(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=7659)}),_N_E=e.O()}]);