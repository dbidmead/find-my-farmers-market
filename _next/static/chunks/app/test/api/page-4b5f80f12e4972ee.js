(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[786],{9824:function(e,t,s){Promise.resolve().then(s.bind(s,8091))},8091:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ApiTestPage}});var r=s(7437),n=s(2265),a=s(6454),components_ApiTest=()=>{let[e,t]=(0,n.useState)("20500"),[s,c]=(0,n.useState)("20"),[o,l]=(0,n.useState)(null),[i,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(null),handleTest=async()=>{try{d(!0),m(null);let t=await (0,a.p)({zip:e,radius:s});l(t)}catch(e){console.error("API test error:",e),m(e instanceof Error?e.message:"Unknown error occurred")}finally{d(!1)}};return(0,r.jsxs)("div",{className:"p-4 border rounded bg-gray-50",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"API Test"}),(0,r.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm mb-1",children:"ZIP Code:"}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"px-2 py-1 border rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm mb-1",children:"Radius (miles):"}),(0,r.jsx)("input",{type:"text",value:s,onChange:e=>c(e.target.value),className:"px-2 py-1 border rounded"})]}),(0,r.jsx)("div",{className:"self-end",children:(0,r.jsx)("button",{onClick:handleTest,disabled:i,className:"px-4 py-1 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:i?"Testing...":"Test API"})})]}),u&&(0,r.jsxs)("div",{className:"p-3 bg-red-100 text-red-700 rounded mb-4",children:["Error: ",u]}),o&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:"Results:"}),(0,r.jsx)("pre",{className:"bg-gray-100 p-3 text-sm overflow-auto max-h-80 rounded",children:JSON.stringify(o,null,2)})]})]})},c=s(5800),o=s(1396),l=s.n(o);function ApiTestPage(){return(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(l(),{href:(0,c.K3)("/"),className:"text-green-600 hover:underline",children:"← Back to Home"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"API Testing Page"}),(0,r.jsxs)("p",{className:"mb-6",children:["This page tests the API implementation to ensure requests are properly formatted. The URL should match: ",(0,r.jsx)("code",{className:"bg-gray-100 px-1",children:"https://www.usdalocalfoodportal.com/api/farmersmarket/?apikey=***&zip=ZIP&radius=RADIUS"})]}),(0,r.jsx)(components_ApiTest,{}),(0,r.jsxs)("div",{className:"mt-8 p-4 bg-gray-100 rounded",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Environment Info:"}),(0,r.jsxs)("p",{children:["NODE_ENV: ","production"]}),(0,r.jsxs)("p",{children:["NEXT_PUBLIC_BASE_PATH: ","/find-my-farmers-market"]}),(0,r.jsxs)("p",{children:["API Key Set: ","Yes"]})]})]})}},6454:function(e,t,s){"use strict";s.d(t,{p:function(){return fetchMarkets}});let r="wT29LlT8K9",buildApiUrl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.endsWith("/")?e:"".concat(e,"/"),n="".concat("https://www.usdalocalfoodportal.com/api").concat(s,"?apikey=").concat(r),a=Object.entries(t).filter(e=>{let[t,s]=e;return s}).map(e=>{let[t,s]=e;return"".concat(t,"=").concat(encodeURIComponent(s))}).join("&");return a?"".concat(n,"&").concat(a):n};async function fetchMarkets(e){try{let t=buildApiUrl("/farmersmarket",e);console.log("Fetching markets with URL (API key hidden):",t.replace(r,"***API_KEY***"));let s=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json","User-Agent":"FarmersMarketDirectory/1.0"},credentials:"omit"});if(!s.ok)throw Error("API responded with status ".concat(s.status));return await s.json()}catch(e){throw console.error("Error fetching markets:",e),e}}},5800:function(e,t,s){"use strict";function getAssetPath(e){console.log("getAssetPath js input:",e);let t=e.match(/\/find-my-farmers-market\//g);t&&t.length>0&&(console.error("Input path already contains ".concat(t.length," repetitions of /find-my-farmers-market/")),console.error("Input path:",e));let s="/find-my-farmers-market";if(!s||e.includes(s)||e.includes(s.slice(1)))return e.startsWith("/")?e:"/".concat(e);let r=e.startsWith("/")?e.slice(1):e,n="".concat(s,"/").concat(r);return console.log("getAssetPath js output:",n),n}s.d(t,{K3:function(){return getAssetPath}})}},function(e){e.O(0,[176,971,472,744],function(){return e(e.s=9824)}),_N_E=e.O()}]);